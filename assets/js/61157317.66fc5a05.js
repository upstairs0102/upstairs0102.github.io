"use strict";(self.webpackChunkupstairs_0102_github_io=self.webpackChunkupstairs_0102_github_io||[]).push([[2933],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>k});var l=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,l,r=function(e,t){if(null==e)return{};var a,l,r={},i=Object.keys(e);for(l=0;l<i.length;l++)a=i[l],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)a=i[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=l.createContext({}),p=function(e){var t=l.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):n(n({},t),e)),a},d=function(e){var t=p(e.components);return l.createElement(o.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},v=l.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=p(a),v=r,k=u["".concat(o,".").concat(v)]||u[v]||c[v]||i;return a?l.createElement(k,n(n({ref:t},d),{},{components:a})):l.createElement(k,n({ref:t},d))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,n=new Array(i);n[0]=v;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[u]="string"==typeof e?e:r,n[1]=s;for(var p=2;p<i;p++)n[p]=a[p];return l.createElement.apply(null,n)}return l.createElement.apply(null,a)}v.displayName="MDXCreateElement"},3361:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>n,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var l=a(87462),r=(a(67294),a(3905));const i={slug:"/rxjs/rxjs-operators",title:"[RxJS] Operators",tags:["rxjs"]},n=void 0,s={unversionedId:"RxJS/[RxJS]Operators",id:"RxJS/[RxJS]Operators",title:"[RxJS] Operators",description:"\u985e\u578b Operators",source:"@site/docs/RxJS/[RxJS]Operators.md",sourceDirName:"RxJS",slug:"/rxjs/rxjs-operators",permalink:"/docs/rxjs/rxjs-operators",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/RxJS/[RxJS]Operators.md",tags:[{label:"rxjs",permalink:"/docs/tags/rxjs"}],version:"current",frontMatter:{slug:"/rxjs/rxjs-operators",title:"[RxJS] Operators",tags:["rxjs"]},sidebar:"tutorialSidebar",previous:{title:"[RxJS] Observable & Observer",permalink:"/docs/rxjs/rxjs-observable-and-observer"},next:{title:"[RxJS] \u57fa\u790e\u77e5\u8b58",permalink:"/docs/rxjs/rxjs-basic"}},o={},p=[{value:"# \u985e\u578b Operators",id:"-\u985e\u578b-operators",level:3},{value:"EMPTY",id:"empty",level:4},{value:"of",id:"of",level:4},{value:"from",id:"from",level:4},{value:"fromEvent",id:"fromevent",level:4},{value:"fromEventPattern",id:"fromeventpattern",level:4},{value:"range",id:"range",level:4},{value:"iif",id:"iif",level:4},{value:"interval",id:"interval",level:4},{value:"timer",id:"timer",level:4},{value:"defer",id:"defer",level:4},{value:"throwError",id:"throwerror",level:4},{value:"ajax",id:"ajax",level:4},{value:"# \u7d44\u5408/\u5efa\u7acb\u985e\u578b Operators",id:"-\u7d44\u5408\u5efa\u7acb\u985e\u578b-operators",level:3},{value:"concat",id:"concat",level:4},{value:"merge",id:"merge",level:4},{value:"zip",id:"zip",level:4},{value:"partition",id:"partition",level:4},{value:"combineLatest",id:"combinelatest",level:4},{value:"forkJoin",id:"forkjoin",level:4},{value:"race",id:"race",level:4},{value:"# \u8f49\u63db\u985e\u578b Operators",id:"-\u8f49\u63db\u985e\u578b-operators",level:3},{value:"map",id:"map",level:4},{value:"scan",id:"scan",level:4},{value:"pairwise",id:"pairwise",level:4},{value:"switchMap",id:"switchmap",level:4},{value:"concatMap",id:"concatmap",level:4},{value:"mergeMap",id:"mergemap",level:4},{value:"exhaustMap",id:"exhaustmap",level:4},{value:"# \u7d44\u5408\u985e\u578b Operators",id:"-\u7d44\u5408\u985e\u578b-operators",level:3},{value:"switchAll",id:"switchall",level:4},{value:"concatAll",id:"concatall",level:4},{value:"mergeAll",id:"mergeall",level:4},{value:"combineLatestAll",id:"combinelatestall",level:4},{value:"startWith",id:"startwith",level:4},{value:"# \u904e\u6ffe\u985e\u578b Operators",id:"-\u904e\u6ffe\u985e\u578b-operators",level:3},{value:"filter",id:"filter",level:4},{value:"first",id:"first",level:4},{value:"last",id:"last",level:4},{value:"single",id:"single",level:4},{value:"take",id:"take",level:4},{value:"takeLast",id:"takelast",level:4},{value:"takeUtil",id:"takeutil",level:4},{value:"takeWhile",id:"takewhile",level:4},{value:"skip",id:"skip",level:4},{value:"skipLast",id:"skiplast",level:4},{value:"skipUntil",id:"skipuntil",level:4},{value:"skipWhile",id:"skipwhile",level:4},{value:"distinct",id:"distinct",level:4},{value:"distinctUntilChanged",id:"distinctuntilchanged",level:4},{value:"distinctUntilKeyChanged",id:"distinctuntilkeychanged",level:4},{value:"sampleTime",id:"sampletime",level:4},{value:"sample",id:"sample",level:4},{value:"auditTime",id:"audittime",level:4},{value:"audit",id:"audit",level:4},{value:"debounceTime",id:"debouncetime",level:4},{value:"debounce",id:"debounce",level:4},{value:"# \u689d\u4ef6/\u5e03\u6797\u985e\u578b Operators",id:"-\u689d\u4ef6\u5e03\u6797\u985e\u578b-operators",level:3},{value:"isEmpty",id:"isempty",level:4},{value:"defaultIfEmpty",id:"defaultifempty",level:4},{value:"find",id:"find",level:4},{value:"findIndex",id:"findindex",level:4},{value:"every",id:"every",level:4},{value:"# \u6578\u5b78/\u805a\u5408\u985e\u578b Operators",id:"-\u6578\u5b78\u805a\u5408\u985e\u578b-operators",level:3},{value:"min",id:"min",level:4},{value:"max",id:"max",level:4},{value:"count",id:"count",level:4},{value:"reduce",id:"reduce",level:4},{value:"tap",id:"tap",level:4},{value:"toArray",id:"toarray",level:4},{value:"delay",id:"delay",level:4},{value:"delayWhen",id:"delaywhen",level:4},{value:"# \u932f\u8aa4\u8655\u7406 Operators",id:"-\u932f\u8aa4\u8655\u7406-operators",level:3},{value:"catchError",id:"catcherror",level:4},{value:"retry",id:"retry",level:4},{value:"retryWhen",id:"retrywhen",level:4},{value:"finalize",id:"finalize",level:4},{value:"# Multicast\u985e\u578b Operators",id:"-multicast\u985e\u578b-operators",level:3},{value:"connectable",id:"connectable",level:4},{value:"share",id:"share",level:4},{value:"shareReplay",id:"sharereplay",level:4}],d={toc:p};function u(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,l.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h3",{id:"-\u985e\u578b-operators"},"# \u985e\u578b Operators"),(0,r.kt)("p",null,"\u7528\u4f86\u7522\u751f Observable \u7684"),(0,r.kt)("p",null,"\u5f15\u5165\u4f4d\u7f6e\u662f\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"rxjs"),"\u800c\u975e ",(0,r.kt)("inlineCode",{parentName:"p"},"rxjs/operators"),"\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { ... } from 'rxjs'\n")),(0,r.kt)("h4",{id:"empty"},"EMPTY"),(0,r.kt)("h4",{id:"of"},"of"),(0,r.kt)("h4",{id:"from"},"from"),(0,r.kt)("h4",{id:"fromevent"},"fromEvent"),(0,r.kt)("h4",{id:"fromeventpattern"},"fromEventPattern"),(0,r.kt)("h4",{id:"range"},"range"),(0,r.kt)("h4",{id:"iif"},"iif"),(0,r.kt)("h4",{id:"interval"},"interval"),(0,r.kt)("h4",{id:"timer"},"timer"),(0,r.kt)("h4",{id:"defer"},"defer"),(0,r.kt)("h4",{id:"throwerror"},"throwError"),(0,r.kt)("h4",{id:"ajax"},"ajax"),(0,r.kt)("h3",{id:"-\u7d44\u5408\u5efa\u7acb\u985e\u578b-operators"},"# \u7d44\u5408/\u5efa\u7acb\u985e\u578b Operators"),(0,r.kt)("p",null,"\u5c07\u591a\u500b Observable \u7d44\u5408\u6216\u5efa\u7acb\u6210\u53e6\u4e00\u500b Observable"),(0,r.kt)("p",null,"\u5f15\u5165\u4f4d\u7f6e\u662f\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"rxjs"),"\u800c\u975e ",(0,r.kt)("inlineCode",{parentName:"p"},"rxjs/operators"),"\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { ... } from 'rxjs'\n")),(0,r.kt)("h4",{id:"concat"},"concat"),(0,r.kt)("h4",{id:"merge"},"merge"),(0,r.kt)("h4",{id:"zip"},"zip"),(0,r.kt)("h4",{id:"partition"},"partition"),(0,r.kt)("h4",{id:"combinelatest"},"combineLatest"),(0,r.kt)("p",null,"\u7528\u4f86\u7d44\u5408\u6bcf\u500b\u8cc7\u6599\u6d41\u6700\u5f8c\u7684\u4e8b\u4ef6\u503c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const startSearch$ = combineLatest({\n  keyword: searchByKeyword$,\n  sort: sortBy$,\n  page: page$.pipe(startWith(1)),\n  perPage: perPage$.pipe(startWith(10))\n});\n")),(0,r.kt)("h4",{id:"forkjoin"},"forkJoin"),(0,r.kt)("h4",{id:"race"},"race"),(0,r.kt)("h3",{id:"-\u8f49\u63db\u985e\u578b-operators"},"# \u8f49\u63db\u985e\u578b Operators"),(0,r.kt)("h4",{id:"map"},"map"),(0,r.kt)("h4",{id:"scan"},"scan"),(0,r.kt)("p",null,"\u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"reduce")," \u5f88\u50cf\uff0c\u53ef\u662f\u4ed6\u6703\u5728\u6bcf\u6b21\u4e8b\u4ef6\u90fd\u6703\u5c07\u7d2f\u52a0\u7684\u8cc7\u6599\u7d66\u4e8e\u8a02\u95b1\u8005\uff0c\u800c ",(0,r.kt)("inlineCode",{parentName:"p"},"reduce")," \u662f\u5168\u90e8\u7d2f\u52a0\u7d50\u675f\u6642\u624d\u5c07\u8a08\u7b97\u7d50\u679c\u7d66\u4e8e\u8a02\u95b1\u8005\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const page$ = merge(previousPage$, nextPage$).pipe(\n  scan((currentPageIndex, value) => {\n    const nextPage = currentPageIndex + +value;\n    return nextPage < 1 ? 1 : nextPage;\n  }, 1)\n);\n")),(0,r.kt)("h4",{id:"pairwise"},"pairwise"),(0,r.kt)("h4",{id:"switchmap"},"switchMap"),(0,r.kt)("p",null,"\u883b\u597d\u7528\u7684\uff0c\u548c Vue \u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"computed")," \u6709\uff08\u4e00\u9ede\u9ede\uff09\u985e\u4f3c\u7684\u7528\u9014\uff0c\u76e3\u807d\uff08\u8a02\u95b1\uff09\u67d0\u4e00\u500b\u8cc7\u6599\u6d41\u4e4b\u5f8c\u8f49\u63db\u70ba\u53e6\u4e00\u500b\u8cc7\u6599\u6d41"),(0,r.kt)("p",null,"\u6709\u65b0\u7684\u4e8b\u4ef6\u6642\uff0c\u6703\u5c07\u4e4b\u524d\u7684 Observable \u7269\u4ef6\u8a02\u95b1\u7d66\u7d50\u675f\u6389"),(0,r.kt)("h4",{id:"concatmap"},"concatMap"),(0,r.kt)("p",null,"\u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"switchMap")," \u7684\u5dee\u7570\u662f\u4ed6\u6703\u7b49\u4e4b\u524d\u7684 Observable \u7269\u4ef6\u8a02\u95b1\u7d50\u675f\u4e4b\u5f8c\u624d\u6703\u300c\u63a5\u7e8c\u300d (concat) \u65b0\u7522\u751f\u7684 Observable \u7269\u4ef6\u8a02\u95b1"),(0,r.kt)("h4",{id:"mergemap"},"mergeMap"),(0,r.kt)("h4",{id:"exhaustmap"},"exhaustMap"),(0,r.kt)("h3",{id:"-\u7d44\u5408\u985e\u578b-operators"},"# \u7d44\u5408\u985e\u578b Operators"),(0,r.kt)("h4",{id:"switchall"},"switchAll"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://stackblitz.com/edit/rxjs-book-operators-switchall?file=index.ts"},"\u66f8\u88e1\u7684\u7bc4\u4f8b")),(0,r.kt)("p",null,"\u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"switchMap")," \u5f88\u50cf\uff0c ",(0,r.kt)("inlineCode",{parentName:"p"},"switchMap")," = ",(0,r.kt)("inlineCode",{parentName:"p"},"switchAll")," + ",(0,r.kt)("inlineCode",{parentName:"p"},"map")),(0,r.kt)("p",null,"\u4ee5\u66f8\u88e1\u7684\u7bc4\u4f8b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const stream$ = source$\n  .pipe(\n    map(round => generateStream(round)),\n    switchAll()\n  )\n")),(0,r.kt)("p",null,"\u53ef\u4ee5\u5beb\u6210"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const stream$ = source$  \n  .pipe(\n    switchMap(round => generateStream(round))\n  )\n")),(0,r.kt)("h4",{id:"concatall"},"concatAll"),(0,r.kt)("h4",{id:"mergeall"},"mergeAll"),(0,r.kt)("h4",{id:"combinelatestall"},"combineLatestAll"),(0,r.kt)("h4",{id:"startwith"},"startWith"),(0,r.kt)("p",null,"\u5f37\u5236\u5728\u8a02\u95b1\u6642\u7d66\u4e88\u7b2c\u4e00\u500b\u4e8b\u4ef6\u503c"),(0,r.kt)("h3",{id:"-\u904e\u6ffe\u985e\u578b-operators"},"# \u904e\u6ffe\u985e\u578b Operators"),(0,r.kt)("h4",{id:"filter"},"filter"),(0,r.kt)("h4",{id:"first"},"first"),(0,r.kt)("h4",{id:"last"},"last"),(0,r.kt)("h4",{id:"single"},"single"),(0,r.kt)("h4",{id:"take"},"take"),(0,r.kt)("p",null,"\u5728\u8a02\u95b1\u5f8c\u53d6\u5f97 N \u6b21\u4e8b\u4ef6\u8cc7\u6599\u4e26\u7d50\u675f\u8cc7\u6599\u6d41\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u53ef\u4ee5\u7528\u5728\u523b\u610f\u628a\u8a02\u95b1\u7d66\u7d50\u675f\u6389\u7684\u5730\u65b9\u3002")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://stackblitz.com/edit/rxjs-book-practice-search-finished?file=index.ts,package.json"},"\u66f8\u88e1\u7684\u7bc4\u4f8b")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const keyword$ = fromEvent(document.querySelector('#keyword'), 'input').pipe(\n  map((event: Event) => (event.target as HTMLInputElement).value),\n  startWith(''),\n  shareReplay(1)\n);\n\nconst search$ = fromEvent(document.querySelector('#search'), 'click');\n\n// \u9ede\u64ca\u67e5\u8a62\u6309\u9215\u7684\u8cc7\u6599\u6d41\nconst searchByKeyword$ = search$.pipe(\n  switchMap(() => keyword$), \n  take(1), // <-- \u9ede\u64ca\u67e5\u8a62\u6309\u9215\u5f8c\u5c31\u6703\u7d50\u675f\u8a02\u95b1\u3002\u5426\u5247\u5982\u679c\u6301\u7e8c\u8a02\u95b1\u5c31\u6703\u9020\u6210\u8f38\u5165\u6846\u6587\u5b57\u8b8a\u52d5(keyword$)\u5247\u6703\u89f8\u767c\u67e5\u8a62\n  filter(keyword => !!keyword)\n);\n")),(0,r.kt)("h4",{id:"takelast"},"takeLast"),(0,r.kt)("p",null,"\u6703\u5728 complete\u6642\u624d\u4e00\u6b21\u53d6\u5f97"),(0,r.kt)("h4",{id:"takeutil"},"takeUtil"),(0,r.kt)("h4",{id:"takewhile"},"takeWhile"),(0,r.kt)("h4",{id:"skip"},"skip"),(0,r.kt)("h4",{id:"skiplast"},"skipLast"),(0,r.kt)("h4",{id:"skipuntil"},"skipUntil"),(0,r.kt)("h4",{id:"skipwhile"},"skipWhile"),(0,r.kt)("h4",{id:"distinct"},"distinct"),(0,r.kt)("h4",{id:"distinctuntilchanged"},"distinctUntilChanged"),(0,r.kt)("p",null,"\u611f\u89ba\u7528\u5728\u907f\u514d\u91cd\u8986\u8cc7\u6599\u4e0a\u4e0d\u932f\u7528"),(0,r.kt)("h4",{id:"distinctuntilkeychanged"},"distinctUntilKeyChanged"),(0,r.kt)("h4",{id:"sampletime"},"sampleTime"),(0,r.kt)("p",null,"\u56fa\u5b9a\u9593\u9694\u6642\u9593\u6642\u53ef\u7528"),(0,r.kt)("h4",{id:"sample"},"sample"),(0,r.kt)("h4",{id:"audittime"},"auditTime"),(0,r.kt)("h4",{id:"audit"},"audit"),(0,r.kt)("h4",{id:"debouncetime"},"debounceTime"),(0,r.kt)("p",null,"\u592a\u5e38\u7528\u4e86"),(0,r.kt)("h4",{id:"debounce"},"debounce"),(0,r.kt)("p",null,"\u53ef\u81ea\u8a02 ",(0,r.kt)("inlineCode",{parentName:"p"},"duration"),"\u8a08\u7b97\u51fd\u5f0f"),(0,r.kt)("h3",{id:"-\u689d\u4ef6\u5e03\u6797\u985e\u578b-operators"},"# \u689d\u4ef6/\u5e03\u6797\u985e\u578b Operators"),(0,r.kt)("h4",{id:"isempty"},"isEmpty"),(0,r.kt)("h4",{id:"defaultifempty"},"defaultIfEmpty"),(0,r.kt)("h4",{id:"find"},"find"),(0,r.kt)("h4",{id:"findindex"},"findIndex"),(0,r.kt)("h4",{id:"every"},"every"),(0,r.kt)("h3",{id:"-\u6578\u5b78\u805a\u5408\u985e\u578b-operators"},"# \u6578\u5b78/\u805a\u5408\u985e\u578b Operators"),(0,r.kt)("h4",{id:"min"},"min"),(0,r.kt)("h4",{id:"max"},"max"),(0,r.kt)("h4",{id:"count"},"count"),(0,r.kt)("h4",{id:"reduce"},"reduce"),(0,r.kt)("h4",{id:"tap"},"tap"),(0,r.kt)("p",null,"\u7528\u9014\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u8655\u7406 side effect\uff08\u5982console.log\u3001DOM\u64cd\u4f5c\uff09"),(0,r.kt)("li",{parentName:"ol"},"\u653e\u5165 observer \u89c0\u5bdf\u8005\u7269\u4ef6")),(0,r.kt)("h4",{id:"toarray"},"toArray"),(0,r.kt)("h4",{id:"delay"},"delay"),(0,r.kt)("h4",{id:"delaywhen"},"delayWhen"),(0,r.kt)("h3",{id:"-\u932f\u8aa4\u8655\u7406-operators"},"# \u932f\u8aa4\u8655\u7406 Operators"),(0,r.kt)("h4",{id:"catcherror"},"catchError"),(0,r.kt)("h4",{id:"retry"},"retry"),(0,r.kt)("h4",{id:"retrywhen"},"retryWhen"),(0,r.kt)("h4",{id:"finalize"},"finalize"),(0,r.kt)("h3",{id:"-multicast\u985e\u578b-operators"},"# Multicast\u985e\u578b Operators"),(0,r.kt)("p",null,"\u5c07 ",(0,r.kt)("inlineCode",{parentName:"p"},"Cold Observable")," \u8f49\u63db\u70ba ",(0,r.kt)("inlineCode",{parentName:"p"},"Warm Observable")),(0,r.kt)("h4",{id:"connectable"},"connectable"),(0,r.kt)("p",null,"\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"connectable")," \u53ef\u5c07 unicast \u8f49\u63db\u70ba multicast\uff0c"),(0,r.kt)("h4",{id:"share"},"share"),(0,r.kt)("p",null,"\u5171\u4eab\u8a08\u7b97\u7d50\u679c"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://stackblitz.com/edit/rxjs-book-warm-observable-api-request"},"\u5171\u4eab API \u56de\u50b3\u8cc7\u6599\u7684\u7bc4\u4f8b"),"\uff08\u7b2c\u4e8c\u6b21\u8a02\u95b1\u4e4b\u5f8c\u4e0d\u9700\u518d\u91cd\u6253API\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const apiRequest$ = new Observable(subscriber => {\n  // \u4f7f\u7528 fetch \u547c\u53eb API\n  fetch('https://jsonplaceholder.typicode.com/todos/1')\n    .then(response => response.text())\n    .then(responseText => {\n      // \u53d6\u5f97\u56de\u61c9\u7684\u5167\u5bb9\uff0c\u4e26\u50b3\u5230 subscriber \u5167\n      subscriber.next(responseText);\n      // \u7d50\u675f\u8cc7\u6599\u6d41\n      subscriber.complete();\n    });\n});\n\nconst sharedApiRequest$ = apiRequest$.pipe(share());\n")),(0,r.kt)("h4",{id:"sharereplay"},"shareReplay"),(0,r.kt)("p",null,"\u91cd\u64ad\u524dN\u6b21\u4e8b\u4ef6\u7684\u8cc7\u6599"),(0,r.kt)("p",null,"\u7531\u65bc ",(0,r.kt)("inlineCode",{parentName:"p"},"share")," \u5be6\u969b\u4e0a\u662f\u5efa\u7acb\u4e00\u500b ",(0,r.kt)("inlineCode",{parentName:"p"},"Subject"),"\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"Subject")," \u8a02\u95b1\u5f8c\u9700\u8981\u6709\u65b0\u4e8b\u4ef6\u624d\u6703\u5f97\u5230\u8cc7\u6599\uff0c\u900f\u904e ",(0,r.kt)("inlineCode",{parentName:"p"},"shareReplay")," \u53ef\u4ee5\u4e0d\u9700\u7b49\u65b0\u4e8b\u4ef6\u5c31\u53ef\u4ee5\u7acb\u5373\u53d6\u5f97\u524d N \u6b21\u7684\u8cc7\u6599\uff08\u4ee5\u524d\u9762\u5171\u4eab API \u7684\u4f8b\u5b50\u4f86\u8aaa\u7531\u65bc\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"Observable")," \u5167\u6709\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"subscriber")," \u4e0a\u547c\u53eb ",(0,r.kt)("inlineCode",{parentName:"p"},"next"),"\uff0c\u8a02\u95b1\u5f8c\u53ef\u7acb\u5373\u53d6\u5f97\u8cc7\u6599\uff09\u3002"),(0,r.kt)("p",null,"\u4e0b\u9762\u4f8b\u5b50\u662f\u900f\u904e ",(0,r.kt)("inlineCode",{parentName:"p"},"fromEven")," \u5efa\u7acb\u7684 Observable\u7269\u4ef6\uff0c\u76f4\u63a5\u53d6\u5f97\u76ee\u524d\u8f38\u5165\u6846\u76ee\u524d\u7684 value\uff08\u6587\u5b57\uff09\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const keyword$ = fromEvent(document.querySelector('#keyword'), 'input').pipe(\n  map((event: Event) => (event.target as HTMLInputElement).value),\n  shareReplay(1)\n);\n")))}u.isMDXComponent=!0}}]);