"use strict";(self.webpackChunkupstairs_0102_github_io=self.webpackChunkupstairs_0102_github_io||[]).push([[9167],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>g});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),d=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=d(e.components);return a.createElement(p.Provider,{value:t},e.children)},c="mdxType",s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=d(n),m=r,g=c["".concat(p,".").concat(m)]||c[m]||s[m]||i;return n?a.createElement(g,l(l({ref:t},u),{},{components:n})):a.createElement(g,l({ref:t},u))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=m;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o[c]="string"==typeof e?e:r,l[1]=o;for(var d=2;d<i;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},14497:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var a=n(87462),r=(n(67294),n(3905));const i={slug:"/ithome2018/day24",title:"Day24 \u7df4\u7fd2 - \u5713\u9905\u5716 (1)",authors:"thunderboy",tags:["ithome","d3.js"]},l=void 0,o={unversionedId:"[\u9435\u4eba\u8cfd]D3.js\u65b0\u624b\u958b\u767c\u57fa\u672c\u5716\u8868/ithome2018-day24",id:"[\u9435\u4eba\u8cfd]D3.js\u65b0\u624b\u958b\u767c\u57fa\u672c\u5716\u8868/ithome2018-day24",title:"Day24 \u7df4\u7fd2 - \u5713\u9905\u5716 (1)",description:"\u4e00\u3001\u4f7f\u7528\u7248\u9762\u914d\u7f6e(Layout)\u756b\u51fa\u5713\u9905\u5716",source:"@site/docs/[\u9435\u4eba\u8cfd]D3.js\u65b0\u624b\u958b\u767c\u57fa\u672c\u5716\u8868/ithome2018-day24.md",sourceDirName:"[\u9435\u4eba\u8cfd]D3.js\u65b0\u624b\u958b\u767c\u57fa\u672c\u5716\u8868",slug:"/ithome2018/day24",permalink:"/docs/ithome2018/day24",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/[\u9435\u4eba\u8cfd]D3.js\u65b0\u624b\u958b\u767c\u57fa\u672c\u5716\u8868/ithome2018-day24.md",tags:[{label:"ithome",permalink:"/docs/tags/ithome"},{label:"d3.js",permalink:"/docs/tags/d-3-js"}],version:"current",frontMatter:{slug:"/ithome2018/day24",title:"Day24 \u7df4\u7fd2 - \u5713\u9905\u5716 (1)",authors:"thunderboy",tags:["ithome","d3.js"]},sidebar:"tutorialSidebar",previous:{title:"Day23 \u52d5\u756b (2)",permalink:"/docs/ithome2018/day23"},next:{title:"Day25 \u7df4\u7fd2 - \u5713\u9905\u5716 (2)",permalink:"/docs/ithome2018/day25"}},p={},d=[{value:"\u4e00\u3001\u4f7f\u7528\u7248\u9762\u914d\u7f6e(Layout)\u756b\u51fa\u5713\u9905\u5716",id:"\u4e00\u4f7f\u7528\u7248\u9762\u914d\u7f6elayout\u756b\u51fa\u5713\u9905\u5716",level:2},{value:"\u4e8c\u3001\u5f27\u5167\u7684\u4e2d\u5fc3\u5ea7\u6a19",id:"\u4e8c\u5f27\u5167\u7684\u4e2d\u5fc3\u5ea7\u6a19",level:2}],u={toc:d};function c(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"\u4e00\u4f7f\u7528\u7248\u9762\u914d\u7f6elayout\u756b\u51fa\u5713\u9905\u5716"},"\u4e00\u3001\u4f7f\u7528\u7248\u9762\u914d\u7f6e(Layout)\u756b\u51fa\u5713\u9905\u5716"),(0,r.kt)("p",null,"\u5728\u524d\u9762\u7684\u6587\u7ae0\u300c",(0,r.kt)("strong",{parentName:"p"},"Day20 \u7e6a\u88fd\u7522\u751f\u5668 (3)"),"\u300d\u4e2d\u6709\u4ecb\u7d39\u904e\u4f7f\u7528\u5f27\u7522\u751f\u5668\u4f86\u7e6a\u88fd\u5713\u9905\u5716\u7684\u65b9\u6cd5\uff0c\u4f7f\u7528\u5f27\u7522\u751f\u5668\u9700\u4f7f\u7528\u5f27\u5f62\u7684\u89d2\u5ea6\u4f86\u7522\u751f\u5716\u5f62\uff0c\u53ef\u662f\u8981\u8a08\u7b97\u89d2\u5ea6\u662f\u6bd4\u8f03\u9ebb\u7169\u4e00\u9ede\u7684\u4e8b\u60c5\uff1b\u5728\u6b64\u7bc7\u7df4\u7fd2\u4e2d\u5c07\u4f7f\u7528D3\u63d0\u4f9b\u7684",(0,r.kt)("strong",{parentName:"p"},"\u7248\u9762\u914d\u7f6e(Layout)"),"\u4f86\u5e6b\u52a9\u6211\u5011\u7528\u6bd4\u8f03\u7c21\u55ae\u4e00\u9ede\u7684\u65b9\u6cd5\u4f86\u7e6a\u88fd\u3002"),(0,r.kt)("p",null,"v3.x\u7684D3\u63d0\u4f9b\u4e8612\u7a2eLayout\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"\u5713\u9905\u5716(Pie)"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"\u529b\u5c0e\u5411\u5716(Force)"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"\u5f26\u5716(Chord)"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"\u6a39\u72c0\u5716(Tree)"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"\u53e2\u96c6\u5716(Cluster)"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"\u6346\u5716(Bundle)"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"\u5305\u88dd\u5716(Pack)"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"\u9577\u689d\u5716(Histogram)"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"\u5340\u57df\u5716(Partition)"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"\u5806\u758a\u5716(Stack)"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"\u77e9\u9663\u6a39\u72c0\u5716(Treemap)"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"\u5c64\u7d1a\u5716(Hierarchy)"),"\u3002\u9019\u88e1\u8981\u4f7f\u7528\u7684\u662f\u5713\u9905\u5716(Pie)\u3002"),(0,r.kt)("p",null,"\u9996\u5148\u4e00\u6a23\u5148\u52a0\u5165",(0,r.kt)("inlineCode",{parentName:"p"},"<svg>")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'var width = 400\nvar height = 400\n\nvar svg = d3.select("body").append("svg")\n  .attr("width",width)\n  .attr("height",height)\n')),(0,r.kt)("p",null,"\u6e96\u5099\u597d\u8981\u5713\u9905\u5716\u8981\u4f7f\u7528\u7684\u4e8c\u7dad\u9663\u5217\u8cc7\u6599\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'var dataSet = [["\u5c0f\u7c73", 60.8], ["\u4e09\u661f", 58.4], ["\u806f\u60f3", 47.3], ["\u860b\u679c", 46.6], ["\u83ef\u70ba", 41.3], ["\u9177\u6d3e", 40.1], ["\u5176\u4ed6", 111.5]]\n')),(0,r.kt)("p",null,"\u5713\u9905\u5716layout\u7684\u65b9\u6cd5\u70ba",(0,r.kt)("inlineCode",{parentName:"p"},"d3.layout.pie()"),"\uff0c\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"pie.value()"),"\u7528\u4f86\u53d6\u5f97\u8cc7\u6599\uff0c\u4e0b\u5217\u7a0b\u5f0f\u4e2d\u653e\u5165\u4e86\u4e00\u500bfunction\u4f86\u53d6\u9663\u5217\u4e2dindex\u70ba1\u7684\u8cc7\u6599\u3002"),(0,r.kt)("p",null,"\u548c\u5716\u5f62\u7522\u751f\u5668\u7684\u4f7f\u7528\u65b9\u5f0f\u985e\u4f3c\uff0c\u56de\u50b3\u7684\u8b8a\u6578\u53ef\u4f5c\u70ba\u51fd\u5f0f\u3001\u7528\u4f86\u8f49\u63db\u7e6a\u88fd\u6240\u9700\u7684\u8cc7\u6599\uff0c\u5728\u5713\u9905\u5716layout\u4e2d\u6240\u9700\u50b3\u5165\u7684\u53c3\u6578\u70ba\u6211\u5011\u7684\u6578\u64da\u8cc7\u6599\uff08\u6240\u4ee5\u5c31\u4e0d\u9700\u8981\u50cf\u5f27\u7522\u751f\u5668\u9700\u50b3\u5165\u89d2\u5ea6\u4e86\uff09\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"var pie = d3.layout.pie()\n  .value(function(d){\n    return d[1]\n  })\n  \nvar pieData = pie(dataSet)\n")),(0,r.kt)("p",null,"\u5728\u9019\u88e1\u5982\u679c\u6211\u5011\u4e0b\u4e86console.log(pieData)\u6aa2\u8996\u525b\u624d\u900f\u904elayout\u51fd\u5f0f\u6240\u53d6\u5230\u7684\u8cc7\u6599\u5982\u4e0b\uff0c\u6703\u767c\u73fe\u88e1\u9762\u7684\u5167\u5bb9\u5176\u5be6\u5c31\u662f\u5df2\u7d93\u8f49\u63db\u70ba\u63d0\u4f9b\u7d66\u5f27\u7522\u751f\u5668\u6240\u9700\u7e6a\u88fd\u7684\u53c3\u6578\u4e86\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Day24 \u7df4\u7fd2 - \u5713\u9905\u5716 (1)_1",src:n(88163).Z,width:"786",height:"100"})),(0,r.kt)("p",null,"\u518d\u4f86\u9700\u5efa\u7acb\u4e00\u500b\u5f27\u7522\u751f\u5668"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"var outerRadius = width / 3\nvar innerRadius = 0\n\nvar arc = d3.svg.arc()\n  .innerRadius(innerRadius)\n  .outerRadius(outerRadius)\n")),(0,r.kt)("p",null,"\u518d\u4f86\u548c\u5148\u524d\u6587\u7ae0\u4e2d\u7528\u5f27\u7522\u751f\u5668\u7e6a\u88fd\u5713\u9905\u5716\u7684\u65b9\u5f0f\u4e00\u6a21\u4e00\u6a23\u4e86\u3002"),(0,r.kt)("p",null,"\u5dee\u5225\u5c31\u5728\u65bc\u4e0d\u9700\u8981\u81ea\u5df1\u8f9b\u82e6\u7684\u624b\u52d5\u8a08\u7b97\u51fa\u5f27\u7522\u751f\u5668\u6240\u9700\u7684\u53c3\u6578\u8cc7\u6599\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'var color = [d3.rgb(214, 39, 40), d3.rgb(31, 119, 180), d3.rgb(174, 199, 232), d3.rgb(255, 127, 14), d3.rgb(255, 187, 120), d3.rgb(44, 160, 44), d3.rgb(152, 223, 138)]\n\nvar arcs = svg.selectAll("g")\n  .data(pieData)\n  .enter()\n  .append("g")\n  .attr("transform", "translate(" + (width/2) + "," + (height/2) + ")")\n  .append("path")\n  .attr("fill", function(d,i){\n    return color[i]\n  })\n  .attr("d", function(d){\n    return arc(d)\n  })\n')),(0,r.kt)("p",null,"\u7d50\u679c\u5982\u4e0b\u5716"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Day24 \u7df4\u7fd2 - \u5713\u9905\u5716 (1)_2",src:n(35455).Z,width:"307",height:"301"})),(0,r.kt)("h2",{id:"\u4e8c\u5f27\u5167\u7684\u4e2d\u5fc3\u5ea7\u6a19"},"\u4e8c\u3001\u5f27\u5167\u7684\u4e2d\u5fc3\u5ea7\u6a19"),(0,r.kt)("p",null,"\u518d\u4f86\u8981\u505a\u7684\u662f\u5728\u5713\u9905\u5716\u7576\u4e2d\u52a0\u5165\u6578\u64da\uff0c\u6bcf\u4e00\u7d44\u6578\u5b57\u8981\u653e\u5165\u5404\u5225\u8cc7\u6599\u7684\u5f27\u5f62\u7576\u4e2d\u3002"),(0,r.kt)("p",null,"\u8981\u53d6\u5f97\u5f27\u5167\u7684\u4e2d\u5fc3\u9ede\u5ea7\u6a19\uff0c\u53ef\u4f7f\u7528\u5f27\u7522\u751f\u5668\u6240\u63d0\u4f9b\u7684\u51fd\u5f0fcentroid()\u4f86\u8a08\u7b97\u3002\u4f7f\u7528\u7684\u65b9\u6cd5\u70ba",(0,r.kt)("inlineCode",{parentName:"p"},"arc.centroid(d)"),"\u3002"),(0,r.kt)("p",null,"centroid()\u50b3\u56de\u4e00\u500b\u9663\u5217",(0,r.kt)("inlineCode",{parentName:"p"},"[x,y]"),"\uff0c\u5373\u70ba\u5f27\u5f62\u7576\u4e2d\u7684\u5ea7\u6a19\u3002\u4ee5\u6b64\u65b9\u6cd5\u6211\u5011\u5728\u539f\u672c\u7684\u5713\u9905\u5716\u4e2d\u4ee5svg\u6a19\u7c64",(0,r.kt)("inlineCode",{parentName:"p"},"<text>"),"\u52a0\u5165\u6578\u64da\u3001\u4e26\u8a2d\u5b9a\u5ea7\u6a19\u7b49\u5c6c\u6027\uff0c\u7a0b\u5f0f\u78bc\u5982\u4e0b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'arcs.append("text")\n    .attr("transform", function(d){\n      var x = arc.centroid(d)[0]\n    var y = arc.centroid(d)[1]\n    return "translate(" + (x + width/2) + "," + (y + height/2) + ")"\n  })\n  .attr("text-anchor", "middle")\n  .text(function(d){\n      var percent = Number(d.value) / d3.sum(dataSet, function(d){ return d[1] }) * 100\n    return percent.toFixed(1) + "%"\n  })\n')),(0,r.kt)("p",null,"\u57fa\u672c\u4e0a\u5230\u9019\u908a\u5df2\u7b97\u5b8c\u6210\uff0c\u53ea\u662f\u770b\u8d77\u4f86\u597d\u50cf\u54ea\u88e1\u602a\u602a\u7684\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Day24 \u7df4\u7fd2 - \u5713\u9905\u5716 (1)_3",src:n(13493).Z,width:"340",height:"313"})),(0,r.kt)("p",null,"\u6211\u5011\u5e0c\u671b\u628a\u6578\u5b57\u5f80\u5916\u79fb\u4e00\u9ede\uff0c\u6240\u9700\u8981\u77e5\u9053\u5ea7\u6a19\u4f4d\u79fb\u7684\u65b9\u5f0f\u4f86\u505a\u8abf\u6574\u3002"),(0,r.kt)("p",null,"\u5f88\u91cd\u8981\u7684\u4e00\u9ede\u9700\u8981\u77e5\u9053\u7684\u662f\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u5f27\u4e2d\u5fc3\u9ede\u4f4d\u65bc\u5713\u5fc3\u3001\u4e26\u4e0d\u662f\u756b\u5e03\u7684\u4e2d\u5fc3\u9ede"),"\u3002"),(0,r.kt)("p",null,"\u6240\u4ee5\u5982\u679c\u6211\u5011\u5c07\u4e0a\u9762\u7a0b\u5f0f\u4e2d\u7684\u5ea7\u6a19\u8a66\u8457\u6539\u70ba arc.centroid(d)","[0]"," * 2 \uff0c\u7d50\u679c\u6703\u8b8a\u6210\u4e0b\u5716"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Day24 \u7df4\u7fd2 - \u5713\u9905\u5716 (1)_4",src:n(41637).Z,width:"350",height:"315"})),(0,r.kt)("p",null,"\u7531\u5713\u5fc3\u4f5c\u70ba\u5ea7\u6a19\u8d77\u9ede\u7684\u4e2d\u5fc3\u9ede\u5ea7\u6a19\uff0c\u4e58\u4ee52\u5f8c\u5ea7\u6a19\u6703\u843d\u5728\u5f27\u5f62\u5716\u7684\u908a\u7de3\u3002"),(0,r.kt)("p",null,"\u4e86\u89e3\u4f4d\u79fb\u7684\u908f\u8f2f\u5f8c\uff0c\u518d\u5c07\u4e0a\u9762\u7684\u7a0b\u5f0f\u91cd\u65b0\u8abf\u6574\u4e00\u4e0b\uff0c\u5c07\u539f\u672c\u7684\u5ea7\u6a19\u6539\u70ba\u4e58\u4ee51.4\uff0c\u7a0b\u5f0f\u78bc\u5982\u4e0b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'arcs.append("text")\n    .attr("transform", function(d){\n      var x = arc.centroid(d)[0] * 1.4\n    var y = arc.centroid(d)[1] * 1.4\n    return "translate(" + (x + width/2) + "," + (y + height/2) + ")"\n  })\n  .attr("text-anchor", "middle")\n  .text(function(d){\n      var percent = Number(d.value) / d3.sum(dataSet, function(d){ return d[1] }) * 100\n    return percent.toFixed(1) + "%"\n  })\n')),(0,r.kt)("p",null,"\u7e6a\u51fa\u7684\u5716\u5f62\u770b\u8d77\u4f86\u6bd4\u8f03\u9806\u773c\u4e86\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Day24 \u7df4\u7fd2 - \u5713\u9905\u5716 (1)_5",src:n(47135).Z,width:"331",height:"322"})))}c.isMDXComponent=!0},88163:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/1-37d5e82a80f37c0e040ea714ed71b4d6.png"},35455:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/2-5c52f24adc832478d6f0225dcb7c0b19.png"},13493:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/3-a66ab4d2945fdb41179d1c00558a86ed.png"},41637:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/4-f1200b4c320eb490d7d6f24c47aceb35.png"},47135:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/5-b10a6846acade1f88daaaaa59adfbfca.png"}}]);