"use strict";(self.webpackChunkupstairs_0102_github_io=self.webpackChunkupstairs_0102_github_io||[]).push([[4164],{3905:(e,n,t)=>{t.d(n,{Zo:()=>m,kt:()=>v});var a=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var u=a.createContext({}),i=function(e){var n=a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},m=function(e){var n=i(e.components);return a.createElement(u.Provider,{value:n},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},s=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,l=e.originalType,u=e.parentName,m=p(e,["components","mdxType","originalType","parentName"]),c=i(t),s=o,v=c["".concat(u,".").concat(s)]||c[s]||d[s]||l;return t?a.createElement(v,r(r({ref:n},m),{},{components:t})):a.createElement(v,r({ref:n},m))}));function v(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var l=t.length,r=new Array(l);r[0]=s;var p={};for(var u in n)hasOwnProperty.call(n,u)&&(p[u]=n[u]);p.originalType=e,p[c]="string"==typeof e?e:o,r[1]=p;for(var i=2;i<l;i++)r[i]=t[i];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}s.displayName="MDXCreateElement"},2774:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>r,default:()=>c,frontMatter:()=>l,metadata:()=>p,toc:()=>i});var a=t(7462),o=(t(7294),t(3905));const l={slug:"2021/02/09/compatible-vue2-and-vue3",title:"\u76f8\u5bb9 Vue2\u53ca Vue3\u74b0\u5883\u7684 Component\u5beb\u6cd5",authors:"thunderboy",tags:["javascript","vue"]},r=void 0,p={permalink:"/blog/2021/02/09/compatible-vue2-and-vue3",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2021/2021-02-09-compatible-vue2-and-vue3.md",source:"@site/blog/2021/2021-02-09-compatible-vue2-and-vue3.md",title:"\u76f8\u5bb9 Vue2\u53ca Vue3\u74b0\u5883\u7684 Component\u5beb\u6cd5",description:"\u524d\u8a00",date:"2021-02-09T00:00:00.000Z",formattedDate:"February 9, 2021",tags:[{label:"javascript",permalink:"/blog/tags/javascript"},{label:"vue",permalink:"/blog/tags/vue"}],readingTime:3.64,hasTruncateMarker:!0,authors:[{name:"Adam You",title:"Engineer @ Blueplanet Inc.",url:"https://github.com/upstairs0102",imageURL:"/img/avatar.jpg",key:"thunderboy"}],frontMatter:{slug:"2021/02/09/compatible-vue2-and-vue3",title:"\u76f8\u5bb9 Vue2\u53ca Vue3\u74b0\u5883\u7684 Component\u5beb\u6cd5",authors:"thunderboy",tags:["javascript","vue"]},prevItem:{title:"Next.js\u4e0a\u4f7f\u7528 Redux\u56db\u5144\u5f1f",permalink:"/blog/2021/05/23/lib-of-redux-on-next"},nextItem:{title:"Vue2\u7684 Option-Based Component\u4e2d\u4f7f\u7528Typescript\u7684\u7c21\u6613\u65b9\u5f0f",permalink:"/blog/2021/02/09/vue-option-based-component-with-typescript"}},u={authorsImageUrls:[void 0]},i=[{value:"\u524d\u8a00",id:"\u524d\u8a00",level:2},{value:"v-model",id:"v-model",level:2},{value:"\u5075\u6e2c\u74b0\u5883",id:"\u5075\u6e2c\u74b0\u5883",level:2},{value:"Functional Component",id:"functional-component",level:2},{value:"\u7d50\u8ad6",id:"\u7d50\u8ad6",level:2}],m={toc:i};function c(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,a.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"\u524d\u8a00"},"\u524d\u8a00"),(0,o.kt)("p",null,"\u7406\u8ad6\u4e0a Vue3.x\u5927\u591a\u6578\u7684\u5beb\u6cd5\u662f\u6709\u5411\u4e0b\u76f8\u5bb9 Vue2.x\u7684\u5beb\u6cd5\uff0c\u6240\u4ee5\u7406\u8ad6\u4e0a",(0,o.kt)("inlineCode",{parentName:"p"},".vue"),"\u6a94Component\u7684\u5beb\u6cd5\u53ea\u8981\u540c\u6642\u7b26\u5408 Vue3.x\u548c Vue2.x\u7684\u5beb\u6cd5\uff0c\u662f\u80fd\u5920\u5c07\u540c\u4e00\u500b\u6a94\u6848\u5171\u7528\u65bc\u5169\u8005\u4e0d\u540c\u74b0\u5883\u7576\u4e2d\u3002"),(0,o.kt)("p",null,"\u4ee5\u4e0b\u6703\u91dd\u5c0d\u5e7e\u7a2e\u6211\u9047\u904e\u5728\u9019\u5169\u500b\u74b0\u5883\u4e2d\u8f03\u5927\u5dee\u7570\u7684\u90e8\u4efd\u4ee5\u53ca\u89e3\u6c7a\u65b9\u5f0f\u505a\u500b\u8aaa\u660e\u3002"),(0,o.kt)("h2",{id:"v-model"},"v-model"),(0,o.kt)("p",null,"Vue2.x\u548c Vue3.x Component\u96d9\u5411\u7d81\u5b9a\u4e3b\u8981\u6709\u5169\u500b\u5dee\u7570\uff1a"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Vue3.x\u79fb\u9664\u4e86 ",(0,o.kt)("inlineCode",{parentName:"li"},".sync"),"\u5beb\u6cd5\uff0c\u4e26\u4e14\u55ae\u4e00 Component\u4e2d\u53ef\u6709\u591a\u500b ",(0,o.kt)("inlineCode",{parentName:"li"},"v-model"),"\u3002"),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"v-model"),"\u5c0d\u61c9\u7684 ",(0,o.kt)("inlineCode",{parentName:"li"},"prop"),"\u548c ",(0,o.kt)("inlineCode",{parentName:"li"},"event"),"\u9810\u8a2d\u540d\u7a31\u4e0d\u540c\u3002")),(0,o.kt)("p",null,"\u5728 Vue2.x\u7684\u74b0\u5883\u7576\u4e2d\uff0c",(0,o.kt)("inlineCode",{parentName:"p"},"v-model"),"\u9810\u8a2d\u5c0d\u61c9 ",(0,o.kt)("inlineCode",{parentName:"p"},"v-bind:value"),"\u548c ",(0,o.kt)("inlineCode",{parentName:"p"},"@input"),"\uff0c\u4f8b\u5982\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vue"},'<input :value="syncValue" @input="handleInput"/>\n\x3c!-- \u7b49\u540c\u65bc --\x3e\n<input v-model="syncValue"/>\n')),(0,o.kt)("p",null,"\u5728 Vue3.x\u7684\u74b0\u5883\u7576\u4e2d\uff0c",(0,o.kt)("inlineCode",{parentName:"p"},"v-model"),"\u9810\u8a2d\u5c0d\u61c9 ",(0,o.kt)("inlineCode",{parentName:"p"},"v-bind:modelValue"),"\u548c ",(0,o.kt)("inlineCode",{parentName:"p"},"@update:modelValue")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vue"},'<input :modelValue="syncValue" @update:modelValue="handleInput"/>\n\x3c!-- \u7b49\u540c\u65bc --\x3e\n<input v-model="syncValue"/>\n')),(0,o.kt)("p",null,"\u7d9c\u5408\u4ee5\u4e0a\u5373\u53ef\u5f97\u51fa\u4e00\u500b\u7d50\u8ad6\uff0c\u53ea\u8981\u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"p"},"model"),"\u6b04\u4f4d\u8a2d\u5b9a\u9810\u8a2d\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"prop"),"\u548c",(0,o.kt)("inlineCode",{parentName:"p"},"event"),"\u70ba\u548c Vue3.x\u9810\u8a2d\u503c\u76f8\u540c\uff0c\u90a3\u9ebc\u5c31\u53ef\u4ee5\u8b93\u9019\u500b Component\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"v-model"),"\u540c\u6642\u76f8\u5bb9\u65bc Vue2.x\u548c Vue3.x\u3002"),(0,o.kt)("p",null,"\u4e5f\u5c31\u662f\u53ea\u8981\u5728 option\u7576\u4e2d\u52a0\u5165\u9019\u500b\u5373\u53ef\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"model: {\n  prop: 'modelValue',\n  event: 'update:modelValue'\n}\n")),(0,o.kt)("p",null,"\u7bc4\u4f8b\u5982\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <input v-model=\"syncValue\"/>\n</template>\n\n<script>\nexport default {\n  // \u4f7f\u7528 model\u8a2d\u5b9a\u9810\u8a2d\u7684 prop\u53ca event\u540d\u7a31\n  model: {\n    prop: 'modelValue',\n    event: 'update:modelValue'\n  },\n  props: ['modelValue'],\n  computed: {\n    syncValue: {\n      get () {\n        return this.modelValue\n      },\n      set (v) {\n        this.$emit('update:modelValue', v)\n      }\n    }\n  }\n<\/script>\n")),(0,o.kt)("h2",{id:"\u5075\u6e2c\u74b0\u5883"},"\u5075\u6e2c\u74b0\u5883"),(0,o.kt)("p",null,"\u5728\u67d0\u4e00\u4e9b\u66f4\u8907\u96dc\u7684\u60c5\u6cc1\uff0c\u5df2\u7d93\u6c92\u6709\u8fa6\u6cd5\u5728\u540c\u4e00\u652f\u7a0b\u5f0f\u5165\u540c\u6642\u76f8\u5bb9\u65bc Vue2.x\u548c Vue3.x\u5169\u500b\u74b0\u5883\uff0c\u5fc5\u9700\u8981\u5206\u6210\u5169\u652f\u7a0b\u5f0f\u624d\u884c\uff0c\u9019\u6642\u5019\u6211\u5011\u53ef\u80fd\u5c31\u6703\u9700\u8981\u7528\u7a0b\u5f0f\u4f86\u5224\u65b7\u76ee\u524d\u7684\u74b0\u5883\u662f Vue2.x\u9084\u662f Vue3.x\uff0c\u518d",(0,o.kt)("strong",{parentName:"p"},"\u300c\u52d5\u614bimport\u300d"),"\u9032\u4f86\u6240\u5c0d\u61c9\u7684\u7a0b\u5f0f",(0,o.kt)("strong",{parentName:"p"},"\uff08\u9700\u6ce8\u610f\uff0c\u5982\u679c\u662f\u63a1\u7528\u4e00\u822c\u7684 import\u65b9\u5f0f\u53ef\u80fd\u6703\u5728 webpack\u6253\u5305\u6642\u5c31\u4f9d\u8cf4\u6240\u6709\u7a0b\u5f0f\u9020\u6210\u51fa\u932f\uff09"),"\u3002"),(0,o.kt)("p",null,"Vue\u5be6\u4f8b\u5728\u9019\u5169\u8005\u74b0\u5883\u5e95\u4e0b\u6703\u6709\u4e0d\u540c\u6771\u897f\uff0c\u6211\u81ea\u5df1\u63a1\u7528\u7684\u5224\u65b7\u4f9d\u64da\u662f\u5224\u65b7 Vue\u5be6\u4f8b\u5e95\u4e0b\u662f\u5426\u6709",(0,o.kt)("inlineCode",{parentName:"p"},"_isVue"),"\uff0c\u5982\u679c\u6709\u7684\u8a71\u5c31\u662f Vue2.x\u3001\u6c92\u6709\u7684\u8a71\u5c31\u662f Vue3.x\uff0c\u4f8b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"if (this._isVue) {\n  // vue2.x  \n} else {\n  // vue3.x\n}\n")),(0,o.kt)("p",null,"\u5b8c\u6574\u7bc4\u4f8b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-vue"},"<template>\n  <component\n    :is=\"dynamicComponent\">\n  </component>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      dynamicComponent: undefined\n    }\n  },\n  created () {\n    if (this._isVue) {\n      // dynamic component (vue2.x)\n      this.dynamicComponent = () => import('./ComponentV2.vue')\n      return\n    }\n    // dynamic component (vue3.x)\n    import('./ComponentV3.vue')\n      .then(d => this.dynamicComponent = d.default)\n  }\n}\n<\/script>\n")),(0,o.kt)("h2",{id:"functional-component"},"Functional Component"),(0,o.kt)("p",null,"Function Component\u5728 Vue2.x\u548c Vue3.x\u7576\u4e2d\u6709\u975e\u5e38\u5927\u5e45\u5ea6\u7684 breaking change\uff0c\u6240\u4ee5\u57fa\u672c\u4e0a\u5982\u679c\u8981\u76f8\u5bb9\u7684\u8a71\u80af\u5b9a\u662f\u8981\u5206\u5225\u5beb\u6210\u4e0d\u540c\u7684\u7a0b\u5f0f\u7684\u3002"),(0,o.kt)("p",null,"\u5c31\u6211\u7684\u7d93\u9a57\u7576\u4e2d\u9019\u500b\u90e8\u4efd\u662f\u6700\u82b1\u6642\u9593\uff0c\u800c\u4e14\u632b\u6298\u611f\u6700\u91cd\u7684\u5730\u65b9\uff0c\u5efa\u8b70\u5148\u5c07\u5b98\u7db2\u6587\u4ef6\u5b8c\u6574\u770b\u904e\u4e00\u904d\uff0c\u518d\u958b\u59cb\u5f9e\u7c21\u55ae\u7684 Component\u5be6\u4f5c\u4e2d\u7df4\u7fd2\u8d77\uff1a"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://v3.vuejs.org/guide/migration/functional-components.html#overview"},"https://v3.vuejs.org/guide/migration/functional-components.html#overview")),(0,o.kt)("h2",{id:"\u7d50\u8ad6"},"\u7d50\u8ad6"),(0,o.kt)("p",null,"\u61c9\u8a72\u9084\u6703\u6709\u5f88\u591a\u6211\u6c92\u6709\u5be6\u4f5c\u904e\u7684\u4e0d\u540c\u60c5\u6cc1\uff0c\u4ee5\u4e0a\u5c31\u4ee5\u6211\u81ea\u5df1\u7684\u7d93\u9a57\u6240\u9047\u904e\u7684\u60c5\u6cc1\u8ddf\u5927\u5bb6\u5206\u4eab\u56c9\u3002"))}c.isMDXComponent=!0}}]);