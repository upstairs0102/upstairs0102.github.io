"use strict";(self.webpackChunkupstairs_0102_github_io=self.webpackChunkupstairs_0102_github_io||[]).push([[4862],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>k});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),s=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(o.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),d=s(n),u=r,k=d["".concat(o,".").concat(u)]||d[u]||m[u]||l;return n?a.createElement(k,i(i({ref:t},c),{},{components:n})):a.createElement(k,i({ref:t},c))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=u;var p={};for(var o in t)hasOwnProperty.call(t,o)&&(p[o]=t[o]);p.originalType=e,p[d]="string"==typeof e?e:r,i[1]=p;for(var s=2;s<l;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},57583:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>p,toc:()=>s});var a=n(87462),r=(n(67294),n(3905));const l={slug:"/react/nextjs-data-fetching",title:"[Next.js] Data Fetching",tags:["react","next.js"]},i=void 0,p={unversionedId:"React/[Next.js] Data Fetching",id:"React/[Next.js] Data Fetching",title:"[Next.js] Data Fetching",description:"Data Fetching - App Router /app",source:"@site/docs/React/[Next.js] Data Fetching.md",sourceDirName:"React",slug:"/react/nextjs-data-fetching",permalink:"/docs/react/nextjs-data-fetching",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/React/[Next.js] Data Fetching.md",tags:[{label:"react",permalink:"/docs/tags/react"},{label:"next.js",permalink:"/docs/tags/next-js"}],version:"current",frontMatter:{slug:"/react/nextjs-data-fetching",title:"[Next.js] Data Fetching",tags:["react","next.js"]},sidebar:"tutorialSidebar",previous:{title:"[Next.js] CSS",permalink:"/docs/react/nextjs-css"},next:{title:"[Next.js] Getting Started",permalink:"/docs/react/nextjs-getting-starged"}},o={},s=[{value:"Data Fetching - App Router <code>/app</code>",id:"data-fetching---app-router-app",level:2},{value:"Data Fetching &amp; Rendering",id:"data-fetching--rendering",level:3},{value:"\u6574\u7406",id:"\u6574\u7406",level:3},{value:"CSR",id:"csr",level:3},{value:"SSR",id:"ssr",level:3},{value:"<code>fetch</code> \u8a2d\u5b9a <code>cache: &#39;no-store&#39;</code>",id:"fetch-\u8a2d\u5b9a-cache-no-store",level:4},{value:"<code>dynamic = &#39;force-dynamic&#39;</code>",id:"dynamic--force-dynamic",level:4},{value:"<code>fetchCache = force-no-store</code>",id:"fetchcache--force-no-store",level:4},{value:"\u52d5\u614b\u512a\u5148",id:"\u52d5\u614b\u512a\u5148",level:4},{value:"Streaming SSR",id:"streaming-ssr",level:3},{value:"Shell Component",id:"shell-component",level:4},{value:"SSG",id:"ssg",level:3},{value:"<code>const dynamic = &#39;force-static&#39;</code>",id:"const-dynamic--force-static",level:4},{value:"<code>generateStaticParams</code>\uff08\u5c0d\u61c9 /pages \u7684 <code>getStaticPaths</code>\uff09",id:"generatestaticparams\u5c0d\u61c9-pages-\u7684-getstaticpaths",level:4},{value:"<code>fetch</code>\uff08\u5c0d\u61c9 /pages \u7684 <code>getStaticProps</code>\uff09",id:"fetch\u5c0d\u61c9-pages-\u7684-getstaticprops",level:4},{value:"ISR",id:"isr",level:3},{value:"Data Fetching - <code>pages/</code> (\u820a\u7684\u5beb\u6cd5)",id:"data-fetching---pages-\u820a\u7684\u5beb\u6cd5",level:2},{value:"<code>getInitialProps</code> (legacy API)",id:"getinitialprops-legacy-api",level:3},{value:"<code>getServerSideProps</code>",id:"getserversideprops",level:3},{value:"<code>getStaticProps</code>",id:"getstaticprops",level:3},{value:"<code>getStaticPaths</code>",id:"getstaticpaths",level:3}],c={toc:s};function d(e){let{components:t,...l}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"data-fetching---app-router-app"},"Data Fetching - App Router ",(0,r.kt)("inlineCode",{parentName:"h2"},"/app")),(0,r.kt)("h3",{id:"data-fetching--rendering"},"Data Fetching & Rendering"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20250510175111801",src:n(12407).Z,width:"2742",height:"1183"})),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u9019\u500b\u662f\u6211\u81ea\u5df1\u756b\u7684\u7c21\u6613\u6d41\u7a0b\u5716")),(0,r.kt)("h3",{id:"\u6574\u7406"},"\u6574\u7406"),(0,r.kt)("p",null,"\u901a\u7528\u898f\u5247 - \u5982\u679c\u4f60\u6709\u5206\u9801\u9762\u548c\u5b50\u5143\u4ef6\uff08Component\uff09\uff0c\u884c\u70ba\u6703\u7531\u300c\u6700\u52d5\u614b\u7684 component \u6c7a\u5b9a\u300d\uff0c\u4e5f\u5c31\u662f\u8aaa\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u82e5\u4f60\u5728\u67d0\u500b child component \u5beb\u4e86 ",(0,r.kt)("inlineCode",{parentName:"li"},"force-dynamic"),"\uff0c\u6574\u9801\u6703\u8b8a SSR"),(0,r.kt)("li",{parentName:"ul"},"\u6240\u4ee5\u5efa\u8b70\uff1a",(0,r.kt)("strong",{parentName:"li"},"SSR \u6216 SSG \u5728\u6240\u6709\u9801\u9762\uff08route entry\uff09\u90fd\u660e\u78ba\u8a2d\u5b9a dynamic\uff0c\u4fdd\u6301\u4e00\u81f4\u6027"))),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u6a21\u5f0f"),(0,r.kt)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"),(0,r.kt)("th",{parentName:"tr",align:null},"\u5efa\u8b70\u8a2d\u5b9a\u5beb\u6cd5\uff08\u65bc\u9802\u5c64 component\uff09"),(0,r.kt)("th",{parentName:"tr",align:null},"fetch \u5feb\u53d6"),(0,r.kt)("th",{parentName:"tr",align:null},"\u756b\u9762\u5feb\u53d6"),(0,r.kt)("th",{parentName:"tr",align:null},"SEO"),(0,r.kt)("th",{parentName:"tr",align:null},"\u4f7f\u7528\u6642\u6a5f"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"CSR")," (Client-Side Rendering)"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6240\u6709\u5167\u5bb9\u90fd\u5728 client \u7aef\u52d5\u614b\u6e32\u67d3"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"'use client'")," (\u6574\u9801)"),(0,r.kt)("td",{parentName:"tr",align:null},"\u26d4 \u7121 SSR"),(0,r.kt)("td",{parentName:"tr",align:null},"\u26d4 \u7121 SSR"),(0,r.kt)("td",{parentName:"tr",align:null},"\u274c \u7121"),(0,r.kt)("td",{parentName:"tr",align:null},"\u50c5\u9650\u975e SEO \u9801\u9762\uff0c\u5982\u5f8c\u53f0\u7ba1\u7406\u3001\u5100\u8868\u677f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"SSR")," (Server-Side Rendering\uff0c\u8cc7\u6599\u52d5\u614b\u4f46\u756b\u9762\u5feb\u53d6 - \u9700\u5c0f\u5fc3\u4f7f\u7528)"),(0,r.kt)("td",{parentName:"tr",align:null},"\u4f3a\u670d\u5668 fetch \u8cc7\u6599\uff0c\u6bcf\u6b21\u66f4\u65b0\uff0c\u4f46 UI \u7d50\u69cb\u5feb\u53d6"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"export const fetchCache = 'force-no-store'")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2757 fetch \u4e0d\u5feb\u53d6"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705 UI \u53ef\u5feb\u53d6"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2b50\u2b50"),(0,r.kt)("td",{parentName:"tr",align:null},"\u67e5\u8a62\u3001\u767b\u5165\u9801\u9762\u3001\u9700\u8981\u6700\u65b0\u8cc7\u6599\u4f46 UI \u7a69\u5b9a")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"SSR (\u5f37\u5316)")," (\u8cc7\u6599\u8207\u756b\u9762\u90fd\u4e0d\u5feb\u53d6)"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6574\u9801\u6bcf\u6b21\u8acb\u6c42\u90fd\u91cd\u65b0\u57f7\u884c\uff0c\u5305\u62ec UI \u7d50\u69cb\u8207\u8cc7\u6599"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"export const dynamic = 'force-dynamic'")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2757 fetch \u4e0d\u5feb\u53d6"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2757 UI \u4e0d\u5feb\u53d6"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2b50\u2b50"),(0,r.kt)("td",{parentName:"tr",align:null},"\u9801\u9762\u542b\u6642\u9593\u6233\u3001UUID\u3001\u6216\u52d5\u614b\u908f\u8f2f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Streaming SSR")," (\u5206\u6bb5\u6e32\u67d3)"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5206\u5340\u584a\u4ee5 ",(0,r.kt)("inlineCode",{parentName:"td"},"<Suspense>")," \u6d41\u5f0f\u8f09\u5165\uff0c\u63d0\u5347 TTFB"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"dynamic = 'force-dynamic'")," \u4e14\u642d\u914d ",(0,r.kt)("inlineCode",{parentName:"td"},"<Suspense>")),(0,r.kt)("td",{parentName:"tr",align:null},"\u770b fetch \u8a2d\u5b9a"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705 \u5206\u6bb5 SSR"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2b50"),(0,r.kt)("td",{parentName:"tr",align:null},"\u9700\u8981\u5927\u91cf\u9996\u5c4f\u8cc7\u6599\u3001\u63d0\u5347\u4f7f\u7528\u9ad4\u9a57")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"SSG")," (Static Site Generation)"),(0,r.kt)("td",{parentName:"tr",align:null},"\u9801\u9762\u5b8c\u5168\u975c\u614b\u5316\u3001build \u6642\u9810\u5148\u751f\u6210"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"export const dynamic = 'force-static'")," \u6216\u9810\u8a2d\u884c\u70ba"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705 \u9810\u8a2d\u5feb\u53d6"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705 \u9810\u8a2d\u5feb\u53d6"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2b50\u2b50\u2b50\u2b50"),(0,r.kt)("td",{parentName:"tr",align:null},"\u90e8\u843d\u683c\u3001FAQ\u3001\u7522\u54c1\u5217\u8868\u7b49\u56fa\u5b9a\u5167\u5bb9")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"ISR")," (Incremental Static Regeneration)"),(0,r.kt)("td",{parentName:"tr",align:null},"\u975c\u614b\u9801\u9762\uff0c\u4f46\u53ef\u5b9a\u6642 revalidate \u66f4\u65b0"),(0,r.kt)("td",{parentName:"tr",align:null},"\u4e0d\u8a2d\u5b9a ",(0,r.kt)("inlineCode",{parentName:"td"},"dynamic")," + ",(0,r.kt)("inlineCode",{parentName:"td"},"fetch(url, { next: { revalidate: N } })")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705 \u5b9a\u6642\u66f4\u65b0"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705 \u5feb\u53d6\u5b58\u5728"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2b50\u2b50\u2b50"),(0,r.kt)("td",{parentName:"tr",align:null},"\u975c\u614b\u5167\u5bb9\u9700\u5b9a\u671f\u66f4\u65b0\uff0c\u5982\u65b0\u805e\u5217\u8868\u3001\u6392\u884c\u699c")))),(0,r.kt)("p",null,"SEO \u661f\u661f\u6578\u8aaa\u660e\uff1a"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u661f\u6578"),(0,r.kt)("th",{parentName:"tr",align:null},"\u8aaa\u660e"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2b50\u2b50\u2b50\u2b50"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6975\u7a69\u5b9a SEO\uff0c\u53ef\u9810\u6e2c\u3001\u975c\u614b\u53ef\u6293\uff08SSG\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2b50\u2b50\u2b50"),(0,r.kt)("td",{parentName:"tr",align:null},"\u7a69\u5b9a\uff0c\u4f46\u7565\u6709\u5ef6\u9072\u98a8\u96aa\uff08ISR\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2b50\u2b50"),(0,r.kt)("td",{parentName:"tr",align:null},"\u8cc7\u6599\u5b8c\u6574\uff0c\u4f46\u6548\u80fd\u53ef\u80fd\u7a0d\u6162\uff08SSR\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2b50"),(0,r.kt)("td",{parentName:"tr",align:null},"\u9808\u5c0f\u5fc3\u4f7f\u7528\uff0c\u6613\u53d7 fallback \u8207 crawler \u689d\u4ef6\u5f71\u97ff\uff08Streaming SSR\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u274c"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5b8c\u5168\u4e0d\u63a8\u85a6\u7528\u65bc SEO\uff08CSR only\uff09")))),(0,r.kt)("h3",{id:"csr"},"CSR"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"/app")," \u5167\u5fc5\u9808\u6574\u9801\u52a0\u4e0a ",(0,r.kt)("inlineCode",{parentName:"p"},"'use client'")," \u624d\u6703\u4ee3\u8868\u6574\u9801\u90fd\u6539\u70ba CSR"),(0,r.kt)("h3",{id:"ssr"},"SSR"),(0,r.kt)("h4",{id:"fetch-\u8a2d\u5b9a-cache-no-store"},(0,r.kt)("inlineCode",{parentName:"h4"},"fetch")," \u8a2d\u5b9a ",(0,r.kt)("inlineCode",{parentName:"h4"},"cache: 'no-store'")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fetch")," \u7684 cache \u8a2d\u5b9a\u9810\u8a2d\u70ba ",(0,r.kt)("inlineCode",{parentName:"li"},"cache: 'auto'")," \uff08\u7b49\u540c  ",(0,r.kt)("inlineCode",{parentName:"li"},"cache: 'force-cache'"),"\uff09\uff0c",(0,r.kt)("strong",{parentName:"li"},"\u9810\u8a2d\u9801\u9762\u6703\u4f7f\u7528 SSG")),(0,r.kt)("li",{parentName:"ul"},"\u53ea\u8981\u5176\u4e2d\u4e00\u500b ",(0,r.kt)("inlineCode",{parentName:"li"},"fetch")," \u660e\u78ba\u8a2d\u5b9a ",(0,r.kt)("inlineCode",{parentName:"li"},"cache: 'no-store'")," \u6216 ",(0,r.kt)("inlineCode",{parentName:"li"},"next: { revalidate: 0 }"),"\uff08\u5982 ",(0,r.kt)("inlineCode",{parentName:"li"},"revalidate")," \u8a2d\u5b9a\u6642\u9593\u5247\u70ba ISR\uff09\uff0c\u90a3\u6574\u500b component \u5c31\u6703\u8f49\u6210 SSR (dynamic rendering) - ",(0,r.kt)("strong",{parentName:"li"},"Next.js \u6703\u63d0\u5347\u5230\u6700\u52d5\u614b\u7684\u6a21\u5f0f\u70ba\u6e96\uff08dynamic wins\uff09"),"\uff0c\u4e5f\u5c31\u662f\u8aaa\u7121\u6cd5\u5728\u540c\u500b\u9801\u9762\u540c\u6642\u90e8\u4efd\u4f7f\u7528 SSR\u3001\u90e8\u4efd\u4f7f\u7528 SSG")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"// app/page.tsx\nasync function Page() {\n  const data = await fetch('https://api.example.com/data', {\n    cache: 'no-store', // \u5f37\u5236 SSR\uff0c\u4e0d\u8981\u5feb\u53d6\n  }).then(res => res.json());\n\n  return <div>{data.message}</div>;\n}\nexport default Page;\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"}," ",(0,r.kt)("inlineCode",{parentName:"p"},"fetch")," \u662fnext.js \u8986\u5beb\u539f\u751f\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"fetch"))),(0,r.kt)("h4",{id:"dynamic--force-dynamic"},(0,r.kt)("inlineCode",{parentName:"h4"},"dynamic = 'force-dynamic'")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u53ef\u8a2d\u5b9a\u6574\u9801\u70ba SSR\uff0c\u4e0d\u6703\u5feb\u53d6"),(0,r.kt)("li",{parentName:"ul"},"\u53ef\u7d71\u4e00\u908f\u8f2f\uff0c\u4e0d\u9700\u8981\u5728\u6bcf\u7b46 fetch \u4e0a\u5206\u5225\u8a2d\u5feb\u53d6\u884c\u70ba"),(0,r.kt)("li",{parentName:"ul"},"\u82e5\u5728\u67d0\u500b child component \u5beb\u4e86 ",(0,r.kt)("inlineCode",{parentName:"li"},"force-dynamic"),"\uff0c\u6574\u9801\u6703\u8b8a SSR - ",(0,r.kt)("strong",{parentName:"li"},"\u884c\u70ba\u6703\u7531\u300c\u6700\u52d5\u614b\u7684 component \u6c7a\u5b9a\u300d"))),(0,r.kt)("p",null,"\u5beb\u6cd5\uff0ccomponent \u6700\u4e0a\u9762\u52a0\u4e0a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"export const dynamic = 'force-dynamic';\n")),(0,r.kt)("h4",{id:"fetchcache--force-no-store"},(0,r.kt)("inlineCode",{parentName:"h4"},"fetchCache = force-no-store")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u53ef\u8a2d\u5b9a\u6574\u9801\u53d6\u6d88 fetch \u5feb\u53d6"),(0,r.kt)("li",{parentName:"ul"},"\u548c SSR \u7565\u6709\u4e0d\u540c - \u53ea\u91dd\u5c0d\u8cc7\u6599\u52d5\u614b\uff0c\u756b\u9762\u53ef\u5feb\u53d6"),(0,r.kt)("li",{parentName:"ul"},"\u4e0d\u80fd\u5b8c\u5168\u53d6\u4ee3 dynamic\uff0c\u5982\u679c\u9801\u9762\u4e2d\u6709 fetch \u7684\u52d5\u614b\u908f\u8f2f\uff08\u4f8b\u5982\u6642\u9593\u3001UUID\u3001\u96a8\u6a5f\uff09\uff0c\u90a3\u5c31\u662f\u61c9\u8a72\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"li"},"dynamic = 'force-dynamic'"))),(0,r.kt)("p",null,"\u5beb\u6cd5\uff0ccomponent \u6700\u4e0a\u9762\u52a0\u4e0a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"export const fetchCache = 'force-no-store'\n")),(0,r.kt)("h4",{id:"\u52d5\u614b\u512a\u5148"},"\u52d5\u614b\u512a\u5148"),(0,r.kt)("p",null,"Next.js \u6703\u63d0\u5347\u5230\u6700\u52d5\u614b\u7684\u6a21\u5f0f\u70ba\u6e96\uff08dynamic wins\uff09"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u60c5\u6cc1"),(0,r.kt)("th",{parentName:"tr",align:null},"\u7d50\u679c"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u5168\u90e8 fetch \u90fd\u6c92\u6709\u8a2d\u5b9a \u2192 \u9810\u8a2d\u5feb\u53d6\uff08force-cache\uff09"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705 \u9801\u9762\u8b8a\u6210 SSG")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u5176\u4e2d\u4e00\u500b fetch \u8a2d\u5b9a ",(0,r.kt)("inlineCode",{parentName:"td"},"cache: 'no-store'")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2757 \u6574\u9801\u8b8a\u6210 SSR\uff08dynamic rendering\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Component \u6709 ",(0,r.kt)("inlineCode",{parentName:"td"},"dynamic = 'force-dynamic'")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2757 \u6574\u9801\u8b8a\u6210 SSR")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Component \u6709 ",(0,r.kt)("inlineCode",{parentName:"td"},"fetchCache = 'force-no-store'")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2757 \u6240\u6709 fetch \u9810\u8a2d\u90fd\u662f ",(0,r.kt)("inlineCode",{parentName:"td"},"no-store"),"\uff0c\u6574\u9801\u8b8a SSR")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u6240\u6709 fetch \u8a2d\u5b9a ",(0,r.kt)("inlineCode",{parentName:"td"},"revalidate: 60")),(0,r.kt)("td",{parentName:"tr",align:null},"\u2705 \u9801\u9762\u8b8a\u6210 ISR\uff08Incremental Static Regeneration\uff09")))),(0,r.kt)("h3",{id:"streaming-ssr"},"Streaming SSR"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20250510175602102",src:n(9052).Z,width:"700",height:"348"})),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://oldmo860617.medium.com/%E5%BE%9E-next-js-13-%E8%AA%8D%E8%AD%98-react-server-components-37c2bad96d90"},"\u5f9e Next.js 13 \u8a8d\u8b58 React Server Components"))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20250510175642587",src:n(48575).Z,width:"680",height:"428"})),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://x.com/theo/status/1551354090675773440"},"https://x.com/theo/status/1551354090675773440"))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20250510175747470",src:n(88966).Z,width:"1600",height:"686"})),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"https://letusdev.com/development/staying-hydrated-with-javascript"},"Staying Hydrated with JavaScript"))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5be6\u4f5c\u4e0a\u53ef\u8996\u70ba SSR \u7684\u64f4\u5c55"),(0,r.kt)("li",{parentName:"ul"},"\u9700\u642d\u914d ",(0,r.kt)("inlineCode",{parentName:"li"},"Suspense"))),(0,r.kt)("h4",{id:"shell-component"},"Shell Component"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u300cServer Component \u6e32\u67d3\u8cc7\u6599 + Client Component \u63a7\u5236\u986f\u793a\u300d")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"page.tsx (Server Component)\n \u2514\u2500\u2500 <Suspense>\n       \u2514\u2500\u2500 TimerData.tsx (Server Component)\n             \u2514\u2500\u2500 TimerDisplay.tsx (Client Component)\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"TimerData.tsx"),"\uff1a\u662f Server Component\uff0c\u8ca0\u8cac\u6253 API \u4e26\u56de\u50b3\u8cc7\u6599\uff08\u53ef SSR\uff0c\u5177\u5099 SEO\uff09")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"TimerDisplay.tsx"),"\uff1a\u662f Client Component\uff0c\u8ca0\u8cac\u300c\u63a7\u5236\u4f55\u6642\u986f\u793a\u3001\u986f\u793a\u52d5\u756b\u3001loading \u72c0\u614b\u300d")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"page.tsx"),"\uff1a\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"Suspense")," \u5305\u4f4f ",(0,r.kt)("inlineCode",{parentName:"p"},"TimerData"),"\uff0c\u9054\u6210 lazy load \u6548\u679c"))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"TimerData.tsx"),"\uff08Server Component\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"// app/components/TimerData.tsx\nexport const dynamic = 'force-dynamic'; // \u9632\u6b62\u5feb\u53d6\n\nimport TimerDisplay from './TimerDisplay';\n\nexport default async function TimerData({ delay, label }: { delay: number; label: string }) {\n  // \u6a21\u64ec\u6253 API\n  await new Promise((r) => setTimeout(r, delay));\n\n  const data = { time: new Date().toISOString(), label };\n\n  return <TimerDisplay data={data} />;\n}\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"TimerDisplay.tsx"),"\uff08Client Component\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"// app/components/TimerDisplay.tsx\n'use client';\n\nimport { useState, useEffect } from 'react';\n\nexport default function TimerDisplay({ data }: { data: { time: string; label: string } }) {\n  const [visible, setVisible] = useState(false);\n\n  useEffect(() => {\n    const t = setTimeout(() => setVisible(true), 100); // \u63a7\u5236\u986f\u793a\u52d5\u756b\n    return () => clearTimeout(t);\n  }, []);\n\n  if (!visible) return <div>{data.label} loading...</div>;\n\n  return (\n    <div>\n      \u2705 {data.label} \u5b8c\u6210\uff1a{data.time}\n    </div>\n  );\n}\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"page.tsx"),"\uff08\u6df7\u5408\u7d44\u5408\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'// app/page.tsx\nexport const dynamic = \'force-dynamic\';\n\nimport { Suspense } from \'react\';\nimport TimerData from \'./components/TimerData\';\n\nexport default function Page() {\n  return (\n    <div className="space-y-4 mt-12">\n      <Suspense fallback={<div>A loading...</div>}>\n        <TimerData label="A" delay={3000} />\n      </Suspense>\n      <Suspense fallback={<div>B loading...</div>}>\n        <TimerData label="B" delay={1000} />\n      </Suspense>\n      <Suspense fallback={<div>C loading...</div>}>\n        <TimerData label="C" delay={2000} />\n      </Suspense>\n    </div>\n  );\n}\n')),(0,r.kt)("p",null,"\u554f\u984c\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"TimerDisplay "),"\u662f client component\uff0c\u90a3 SEO \u9084\u6293\u5f97\u5230\u55ce\uff1f"),(0,r.kt)("p",null,"\u4f46\u5be6\u969b\u4e0a\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Client Component \u2260 \u5b8c\u5168 CSR")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u5b83\u7684\u884c\u70ba\u662f\u300c\u4f3a\u670d\u5668\u5148 render \u51fa\u975c\u614b HTML \u2192 \u518d\u9001\u5230\u700f\u89bd\u5668\u505a hydration\u300d\uff0c\u6240\u4ee5\u662f\u4e0d\u6703\u5f71\u97ff SEO \u7684"))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"hydration \u5be6\u4f5c\u4e0a\u4e3b\u8981\u662f\u5728\u7d81\u5b9a DOM \u4e0a\u7684\u4e8b\u4ef6")),(0,r.kt)("h3",{id:"ssg"},"SSG"),(0,r.kt)("h4",{id:"const-dynamic--force-static"},(0,r.kt)("inlineCode",{parentName:"h4"},"const dynamic = 'force-static'")),(0,r.kt)("p",null,"\u5728\u9802\u5c64 Component \u4e0a\u8a2d\u5b9a\uff0c\u6240\u6709 fetch \u90fd\u6703\u5feb\u53d6\uff0c\u9801\u9762\u6703 SSG"),(0,r.kt)("h4",{id:"generatestaticparams\u5c0d\u61c9-pages-\u7684-getstaticpaths"},(0,r.kt)("inlineCode",{parentName:"h4"},"generateStaticParams"),"\uff08\u5c0d\u61c9 /pages \u7684 ",(0,r.kt)("inlineCode",{parentName:"h4"},"getStaticPaths"),"\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"// app/blog/[slug]/page.tsx\nexport async function generateStaticParams() {\n  const posts = await fetch('https://api.example.com/posts').then(res => res.json());\n\n  return posts.map((post: any) => ({\n    slug: post.slug,\n  }));\n}\n")),(0,r.kt)("p",null,"\u5728\u9019\u500b\u7bc4\u4f8b\u4e2d\u900f\u904eapi\u53d6\u5f97\u6240\u6709\u7684 slug \u4e26\u56de\u50b3"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-nginx"},"GET https://api.example.com/posts\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'[\n  { "id": 1, "slug": "hello-world" },\n  { "id": 2, "slug": "my-first-post" },\n  { "id": 3, "slug": "nextjs-guide" }\n]\n')),(0,r.kt)("h4",{id:"fetch\u5c0d\u61c9-pages-\u7684-getstaticprops"},(0,r.kt)("inlineCode",{parentName:"h4"},"fetch"),"\uff08\u5c0d\u61c9 /pages \u7684 ",(0,r.kt)("inlineCode",{parentName:"h4"},"getStaticProps"),"\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"// app/blog/[slug]/page.tsx\nasync function BlogPost({ params }: { params: { slug: string } }) {\n  const post = await fetch(`https://api.example.com/posts/${params.slug}`, {\n    // \u9810\u8a2d\u5c31\u662f\u975c\u614b\u5feb\u53d6\uff08SSG\uff09\n  }).then(res => res.json());\n\n  return <div>{post.title}</div>;\n}\n\nexport default BlogPost;\n")),(0,r.kt)("h3",{id:"isr"},"ISR"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image-20250510175458934",src:n(38963).Z,width:"1272",height:"600"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u96d6\u7136\u4ed6\u7b97\u662f\u4e00\u7a2e\u7279\u6b8a\u60c5\u6cc1\u4e0b\u7684 SSG\uff0c\u4f46\u4ed6\u5be6\u4f5c\u4e0a\u548c SSG \u4e0d\u540c\uff0c\u4ed6\u4e0d\u9700\u8981\u5728\u9801\u9762\u9802\u5c64\u4e0a\u52a0\u4e0a ",(0,r.kt)("inlineCode",{parentName:"li"},"export const dynamic = 'force-static'")),(0,r.kt)("li",{parentName:"ul"},"\u82e5\u52a0\u4e0a ",(0,r.kt)("inlineCode",{parentName:"li"},"dynamic = 'force-static'"),"\uff0c\u53cd\u800c\u6703",(0,r.kt)("strong",{parentName:"li"},"\u7981\u7528 ISR"),"\uff01"),(0,r.kt)("li",{parentName:"ul"},"\u5728 ",(0,r.kt)("inlineCode",{parentName:"li"},"fetch")," \u4e0a\u8a2d\u5b9a ",(0,r.kt)("inlineCode",{parentName:"li"},"next: { revalidate: N }")," ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"// app/blog/[slug]/page.tsx\nasync function BlogPost({ params }: { params: { slug: string } }) {\n  const post = await fetch(`https://api.example.com/posts/${params.slug}`, {\n    next: {\n      revalidate: 60, // \u8868\u793a\u9019\u500b\u9801\u9762\u6703\u5728 60 \u79d2\u5f8c\u91cd\u65b0\u751f\u6210\uff08ISR\uff09\n    }\n  }).then(res => res.json());\n\n  return <div>{post.title}</div>;\n}\n\nexport default BlogPost;\n")),(0,r.kt)("h2",{id:"data-fetching---pages-\u820a\u7684\u5beb\u6cd5"},"Data Fetching - ",(0,r.kt)("inlineCode",{parentName:"h2"},"pages/")," (\u820a\u7684\u5beb\u6cd5)"),(0,r.kt)("p",null,"\u4ee5\u4e0b\u9019\u5e7e\u500b data fetching \u65b9\u6cd5\u90fd\u53ea\u9069\u7528\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"pages/")," \u5e95\u4e0b\u7684\u9801\u9762\uff0c\u9019\u500b\u73fe\u5728\u5df2\u4e0d\u5efa\u8b70\u4f7f\u7528\uff0c\u4e0d\u9069\u7528\u73fe\u5728\u65b0\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"app/")," App Router \u7684\u5beb\u6cd5"),(0,r.kt)("h3",{id:"getinitialprops-legacy-api"},(0,r.kt)("inlineCode",{parentName:"h3"},"getInitialProps")," (legacy API)"),(0,r.kt)("p",null,"\u5b98\u65b9\u5efa\u8b70\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"getStaticProps"),"\u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"getServerSideProps"),"\u53d6\u4ee3 ",(0,r.kt)("inlineCode",{parentName:"p"},"getInitialProps")," (",(0,r.kt)("a",{parentName:"p",href:"https://nextjs.org/docs/api-reference/data-fetching/getInitialProps"},"https://nextjs.org/docs/api-reference/data-fetching/getInitialProps"),")"),(0,r.kt)("p",null,"\u6211\u7684\u7406\u89e3\u9019\u500b\u5c31\u985e\u4f3c Nuxt.js\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"asyncData"),"\uff0c",(0,r.kt)("strong",{parentName:"p"},"\u521d\u6b21\u8f09\u5165\u7684\u6642\u5019\u662f\u5728 server-side\u57f7\u884c\uff0c\u900f\u904e\u524d\u7aefrouter\u9032\u5165\u6642\u662f\u5728 client-side\u57f7\u884c\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\u8981\u6ce8\u610f\u7684\u8a31\u591a\u5751\uff01\uff01")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"getInitialProps"),"\u5982\u679c\u4f7f\u7528\u5728\u6700\u5916\u5c64(",(0,r.kt)("inlineCode",{parentName:"p"},"app.js"),")\u5247\u53ea\u6703\u5728 server-side\u8abf\u7528\uff08\u5594\u2026\uff09")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u5982\u679c\u4f7f\u7528\u5728\u6700\u5916\u5c64(",(0,r.kt)("inlineCode",{parentName:"p"},"app.js"),")\uff0c\u5247\u6ce8\u5165\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"context")," \u53c3\u6578\u6703\u653e\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"{ ctx }"),"  \u4e2d\uff0c\u548c\u4f7f\u7528\u5728 page\u6642\u4e0d\u540c\uff08\uff01\uff01\uff09"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// PAGE\nfunction getInitialProps (context) {\n  const { req, res }  = context\n  return {}\n}\n// app.js\nfunction getInitialProps ({ Component, ctx }) {\n  const { req, res }  = ctx\n  return {}\n}\n")))),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u5982\u679c\u5728\u6700\u5916\u5c64(",(0,r.kt)("inlineCode",{parentName:"p"},"app.js"),")\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"getInitialProps"),"\uff0c\u5247 Page\u4e5f\u540c\u6642\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"getInitialProps"),"\u7684\u8a71\uff0c\u6700\u5916\u5c64(",(0,r.kt)("inlineCode",{parentName:"p"},"app.js"),")\u7684\u512a\u5148\u5ea6\u662f\u6700\u9ad8\u7684\uff0c\u53ea\u6709\u6700\u5916\u5c64\u6703\u88ab\u8abf\u7528\uff0cPage\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"getInitialProps"),"\u662f\u4e0d\u6703\u88ab\u8abf\u7528\u7684\u3002\u5982\u679c\u8981\u8abf\u7528 Page\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"getInitialProps"),"\u8981\u9019\u6a23\u5beb\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// app.js\nfunction getInitialProps ({ Component, ctx }) {\n  const { req, res }  = ctx\n  Component.getInitialProps({ req, res }) // \u53ef\u547c\u53eb Page\u7684 getInitialProps\n  return {}\n}\n")))),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\u5982\u679c Page\u662f\u5de2\u72c0\u7d50\u69cb\uff08nested routes\uff09\u7684\u8a71\uff0c\u5167\u5916\u5c64Page\u90fd\u540c\u6642\u6709 ",(0,r.kt)("inlineCode",{parentName:"p"},"getInitialProps"),"\uff0c\u5247\u53ea\u6709\u6700\u5167\u5c64\u7684\u6703\u88ab\u8abf\u7528\uff0c\u5982\u679c\u5e0c\u671b\u540c\u6642\u90fd\u80fd\u88ab\u8abf\u7528\u7684\u8a71\uff0c\u8981\u9019\u6a23\u5beb\uff1a"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// child page\nimport ParentPage from '@/pages/parentpage/index'\n\nfunction getInitialProps (context) {\n  const { data } = ParentPage.getInitialProps(context)\n  return { data }\n}\n\nexport default function ChildPage ({ data }) {\n  return (\n    \x3c!-- \u9019\u88e1\u8981\u6ce8\u610f\u2026 \u5c07\u7236\u5c64\u7684 getInitialProps\u7684\u56de\u50b3\u503c\u50b3\u5165\u7236\u5c64\u7684 Component --\x3e\n    <ParentPage data={data}>\n        <div>\n      </div>\n    </ParentPage>\n  )\n}\n")),(0,r.kt)("p",{parentName:"li"},"\u4f46\u5982\u540c\u524d\u9762\u6240\u8ff0\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"app.js"),"\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"getInitialProps"),"\u7684\u512a\u5148\u5ea6\u4ecd\u7136\u662f\u6700\u9ad8\u7684"))),(0,r.kt)("h3",{id:"getserversideprops"},(0,r.kt)("inlineCode",{parentName:"h3"},"getServerSideProps")),(0,r.kt)("p",null,"\u53ea\u80fd\u5728 server side\u57f7\u884c\uff0c\u5982\u679c\u975e\u5fc5\u8981\u5728 server\u57f7\u884c\u5c31\u76e1\u91cf\u4e0d\u8981\u4f7f\u7528\uff0c\u5b98\u65b9\u9019\u6a23\u8aaa\u660e\uff1a"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"You should use getServerSideProps only if you need to pre-render a page whose data must be fetched at request time. Time to first byte (TTFB) will be slower than getStaticProps because the server must compute the result on every request, and the result cannot be cached by a CDN without extra configuration.\nIf you don\u2019t need to pre-render the data, then you should consider fetching data on the client side.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'import fetch from "isomorphic-unfetch";\nfunction Page({ data }) {\n  // Render data...\n}\nexport async function getServerSideProps() {\n  const res = await fetch(`https://.../data`);\n  const data = await res.json();\n  return { props: { data } };\n}\nexport default Page;\n')),(0,r.kt)("h3",{id:"getstaticprops"},(0,r.kt)("inlineCode",{parentName:"h3"},"getStaticProps")),(0,r.kt)("p",null,"\u7528\u4f86\u8655\u7406 ",(0,r.kt)("inlineCode",{parentName:"p"},"SSG")," (Static Site Generation) \u7684\u9700\u6c42\uff0c\u7528\u4f86\u5efa\u7acb\u975c\u614b\u9801\u9762\uff0c\u5728 ",(0,r.kt)("strong",{parentName:"p"},"build-time"),"\u7684\u6642\u5019\u57f7\u884c",(0,r.kt)("strong",{parentName:"p"},"\uff08\u4f46\u662f\u5728\u958b\u767c\u6a21\u5f0f(development mode)\u4e0b\u90fd\u6703\u63a1\u7528SSR\u7684\u65b9\u5f0f\uff0c\u4e5f\u5c31\u662frun-time\u7684\u6642\u5019\u57f7\u884c")),(0,r.kt)("p",null,"\u642d\u914d ",(0,r.kt)("inlineCode",{parentName:"p"},"revalidate")," \u53ef\u5be6\u4f5c ISR"),(0,r.kt)("h3",{id:"getstaticpaths"},(0,r.kt)("inlineCode",{parentName:"h3"},"getStaticPaths")),(0,r.kt)("p",null,"\u642d\u914d ",(0,r.kt)("inlineCode",{parentName:"p"},"getStaticProps")," \u4f7f\u7528\uff0c\u9700\u5217\u8209\u51fa\u9700\u8981\u505a\u975c\u614b\u751f\u6210\u7684\u8def\u5f91"))}d.isMDXComponent=!0},12407:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20250510175111801-373ec21fb7087289f4c35852c7d55610.png"},38963:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20250510175458934-db4775f8fe408e0796c14cb6d7eef7ab.png"},9052:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20250510175602102-1a695647007b3d617fb51ccd69159d26.png"},48575:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20250510175642587-610ca954b937ac23ed21ee76781b13d1.png"},88966:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/image-20250510175747470-1a00eb370dec75316a45d82e02e15f5b.png"}}]);